# Spanish translations for PACKAGE package
# Copyright (C) 2025 Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# Automatically generated, 2025.
#
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2026-01-16 11:13+0000\n"
"PO-Revision-Date: 2025-09-04 07:37+0500\n"
"Last-Translator: Automatically generated\n"
"Language-Team: none\n"
"Language: es\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=2; plural=(n != 1);\n"

#. type: Title #
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid "Dependency injection and container"
msgstr ""

#. type: Title ##
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid "Dependency injection <span id=\"dependency-injection\"></span>"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "There are two ways of re-using things in OOP: inheritance and composition."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Inheritance is simple:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"class Cache\n"
"{\n"
"    public function getCachedValue($key)\n"
"    {\n"
"        // ..\n"
"    }\n"
"}\n"
"\n"
"final readonly class CachedWidget extends Cache\n"
"{\n"
"    public function render(): string\n"
"    {\n"
"        $output = $this->getCachedValue('cachedWidget');\n"
"        if ($output !== null) {\n"
"            return $output;\n"
"        }\n"
"        // ...        \n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "The issue here is that these two are becoming unnecessarily coupled or inter-dependent, making them more fragile."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Another way to handle this is composition:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"interface CacheInterface\n"
"{\n"
"    public function getCachedValue($key);\n"
"}\n"
"\n"
"final readonly class Cache implements CacheInterface\n"
"{\n"
"    public function getCachedValue($key)\n"
"    {\n"
"        // ..\n"
"    }\n"
"}\n"
"\n"
"final readonly class CachedWidget\n"
"{\n"
"    public function __construct(\n"
"        private CacheInterface $cache\n"
"    )\n"
"    {\n"
"    }\n"
"    \n"
"    public function render(): string\n"
"    {\n"
"        $output = $this->cache->getCachedValue('cachedWidget');\n"
"        if ($output !== null) {\n"
"            return $output;\n"
"        }\n"
"        // ...        \n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "We've avoided unnecessary inheritance and used `CacheInterface` in the `CacheWidget` to reduce coupling.  You can replace cache implementation without changing `CachedWidget` so it's becoming more stable. The less edits are made to the code, the less chance of breaking it."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "The `CacheInterface` here is a dependency: a contract our object needs to function. In other words, our object depends on the contract."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "The process of putting an instance of a contract into an object (`CachedWidget`) is called dependency injection.  There are many ways to perform it:"
msgstr ""

#. type: Bullet: '- '
#: ../src/guide/concept/di-container.md
msgid "Constructor injection. Best for mandatory dependencies."
msgstr ""

#. type: Bullet: '- '
#: ../src/guide/concept/di-container.md
msgid "Method injection. Best for optional dependencies."
msgstr ""

#. type: Bullet: '- '
#: ../src/guide/concept/di-container.md
msgid "Property injection. Better to be avoided in PHP except maybe data transfer objects."
msgstr ""

#. type: Title ###
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid "Why use private properties <span id=\"why-private-properties\"></span>"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "In the composition example above, note that the `$cache` property is declared as `private`."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "This approach embraces composition by ensuring objects have well-defined interfaces for interaction rather than direct property access, making the code more maintainable and less prone to certain types of mistakes."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "This design choice provides several benefits:"
msgstr ""

#. type: Bullet: '- '
#: ../src/guide/concept/di-container.md
msgid "**Encapsulation**: Private properties with getters/setters allow you to control access and make future changes without breaking existing code."
msgstr ""

#. type: Bullet: '- '
#: ../src/guide/concept/di-container.md
msgid "**Data integrity**: Setters can validate, normalize, or format values before storing them, ensuring properties contain valid data."
msgstr ""

#. type: Bullet: '- '
#: ../src/guide/concept/di-container.md
msgid "**Immutability**: Private properties enable immutable object patterns where setter `with*()` methods return new instances rather than modifying the current one."
msgstr ""

#. type: Bullet: '- '
#: ../src/guide/concept/di-container.md
msgid "**Flexibility**: You can create read-only or write-only properties or add additional logic to property access later."
msgstr ""

#. type: Title ##
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid "DI container <span id=\"di-container\"></span>"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Injecting basic dependencies is straightforward. You're choosing a place where you don't care about dependencies, which is usually an action handler, which you aren't going to unit-test ever, create instances of dependencies needed and pass these to dependent classes."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "It works well when there are few dependencies overall and when there are no nested dependencies. When there are many and each dependency has dependencies itself, instantiating the whole hierarchy becomes a tedious process, which requires lots of code and may lead to hardly debuggable mistakes."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Additionally, lots of dependencies, such as certain third-party API wrappers, are the same for any class using it.  So it makes sense to:"
msgstr ""

#. type: Bullet: '- '
#: ../src/guide/concept/di-container.md
msgid "Define how to instantiate such common dependencies."
msgstr ""

#. type: Bullet: '- '
#: ../src/guide/concept/di-container.md
msgid "Instantiate them when required and only once per request."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "That's what dependency containers are for."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "A dependency injection (DI) container is an object that knows how to instantiate and configure objects and all objects they depend on."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Yii provides the DI container feature through the [yiisoft/di](https://github.com/yiisoft/di) package and [yiisoft/injector](https://github.com/yiisoft/injector) package."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"> [!NOTE]\n"
"> The container contains only shared instances. If you need a factory, use the dedicated\n"
"> [yiisoft/factory](https://github.com/yiisoft/factory) package.\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"> [!TIP]\n"
"> [Martin Fowler's article](https://martinfowler.com/articles/injection.html) has well\n"
"> explained why DI container is useful. Here we will mainly explain the usage of the DI container provided by Yii.\n"
msgstr ""

#. type: Title ###
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid "Configuring container <span id=\"configuring-container\"></span>"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Because to create a new object you need its dependencies, you should register them as early as possible.  You can do it in the application configuration, `config/web.php`. For the following service:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"final class MyService implements MyServiceInterface\n"
"{\n"
"    public function __construct(int $amount)\n"
"    {\n"
"    }\n"
"\n"
"    public function setDiscount(int $discount): void\n"
"    {\n"
"    \n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "configuration could be:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"return [\n"
"    MyServiceInterface::class => [\n"
"        'class' => MyService::class,\n"
"        '__construct()' => [42],\n"
"        'setDiscount()' => [10],\n"
"    ],\n"
"];\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "That's equal to the following:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"$myService = new MyService(42);\n"
"$myService->setDiscount(10);\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "You can provide arguments with names as well:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"return [\n"
"    MyServiceInterface::class => [\n"
"        'class' => MyService::class,\n"
"        '__construct()' => ['amount' => 42],\n"
"        'setDiscount()' => ['discount' => 10],\n"
"    ],\n"
"];\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "That's basically it. You define a map of interfaces to classes and define how to configure them. When an interface is requested in constructor or elsewhere, container creates an instance of a class and configures it as per the configuration:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"final class MyAction\n"
"{\n"
"    public function __construct(\n"
"        private readonly MyServiceInterface $myService\n"
"    ) {\n"
"    }\n"
"    \n"
"    public function __invoke() \n"
"    {\n"
"        $this->myService->doSomething();\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "There are extra methods of declaring dependency configuration."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "For simplest cases where there are no custom values needed and all the constructor dependencies could be obtained from a container, you can use a class name as a value."
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"interface EngineInterface\n"
"{\n"
"    \n"
"}\n"
"\n"
"final class EngineMarkOne implements EngineInterface\n"
"{\n"
"    public function __construct(CacheInterface $cache) {\n"
"    }   \n"
"}\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "In the above example, if we already have cache defined in the container, nothing besides the class name is needed:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"return [\n"
"    // declare a class for an interface, resolve dependencies automatically\n"
"    EngineInterface::class => EngineMarkOne::class,\n"
"];\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "If you have a dependency that has public properties, you can configure it as well."
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"final class NameProvider\n"
"{\n"
"    public string $name;\n"
"}\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Here's how to do it for the example above:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"NameProvider::class => [\n"
"    'class' => NameProvider::class, \n"
"    '$name' => 'Alex',\n"
"],\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "In this example, you may notice `NameProvider` specified twice. The key is what you may request as dependency and the value is how to create it."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "If the configuration is tricky and requires some logic, a closure can be used:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"MyServiceInterface::class => static function(ContainerInterface $container) {\n"
"    return new MyService($container->get('db'));\n"
"},\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Additionally, to `ContainerInterface`, you can request any registered service directly as a closure parameter.  The injector will automatically resolve and inject these:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"MyServiceInterface::class => static function(ConnectionInterface $db) {\n"
"    return new MyService($db);\n"
"},\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "It's possible to use a static method call:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid "MyServiceInterface::class => [MyFactory::class, 'create'],\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Or an instance of an object:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid "MyServiceInterface::class => new MyService(),\n"
msgstr ""

#. type: Title ###
#: ../src/guide/concept/di-container.md
#, fuzzy, no-wrap
#| msgid "Detaching event handlers <span id=\"detaching-event-handlers\"></span>"
msgid "Injecting dependencies properly <span id=\"injecting-dependencies\"></span>"
msgstr "Desacoplar Gestores de Eventos <span id=\"detaching-event-handlers\"></span>"

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Directly referencing a container in a class is a bad idea since the code becomes non-generic, coupled to the container interface and, what's worse, dependencies are becoming hidden.  Because of that, Yii inverts the control by automatically injecting objects from a container in some constructors and methods based on method argument types."
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "This is primarily done in constructor and handing method of action handlers:"
msgstr ""

#. type: Fenced code block (php)
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid ""
"use \\Yiisoft\\Cache\\CacheInterface;\n"
"\n"
"final readonly class MyController\n"
"{\n"
"    public function __construct(\n"
"        private CacheInterface $cache\n"
"    )\n"
"    {\n"
"        $this->cache = $cache;    \n"
"    }\n"
"\n"
"    public function actionDashboard(RevenueReport $report)\n"
"    {\n"
"        $reportData = $this->cache->getOrSet('revenue_report', function() use ($report) {\n"
"            return $report->getData();               \n"
"        });\n"
"\n"
"        return $this->render('dashboard', [\n"
"           'reportData' => $reportData,\n"
"        ]);\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: ../src/guide/concept/di-container.md
msgid "Since it's [yiisoft/injector](https://github.com/yiisoft/injector) that instantiates and calls action handler, it checks the constructor and method argument types, gets dependencies of these types from a container and passes them as arguments. That's usually called auto-wiring. It happens for sub-dependencies as well, that's if you don't give dependency explicitly, the container would check if it has such a dependency first.  It's enough to declare a dependency you need, and it would be got from a container automatically."
msgstr ""

#. type: Title ##
#: ../src/guide/concept/di-container.md
#, no-wrap
msgid "References <span id=\"references\"></span>"
msgstr ""

#. type: Bullet: '- '
#: ../src/guide/concept/di-container.md
msgid "[Inversion of Control Containers and the Dependency Injection pattern by Martin Fowler](https://martinfowler.com/articles/injection.html)"
msgstr ""
